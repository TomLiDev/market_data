<!DOCTYPE html>
<html>
    <head>
        <!--<link rel="stylesheet" href="style.css">-->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <title>Stock Visualizer</title>
    </head>
<body>


    <h2>
        This is a placeholder, baby!
    </h2>

    <div id="graph-area" style="height:80%; width:80%;">
        <canvas id="candlestick-chart"></canvas>
    </div>

    <script>

        $(document).ready(function(){
            console.log("Early test")
            $.ajax({
                    type: "POST",
                    url: "/get_forex_data/",
                    data: {
                    'symbol': 'EURUSD',
                },
                success: function (res, status) {
                    console.log("Forex test within JS", res)
                    daily_data = res["prices"]["Time Series FX (Daily)"]
                    console.log("Forex 2nd test for usable data", daily_data)
                    daily_series = [];
                    console.log("3rd", daily_data["2024-09-27"])
                    console.log("fghdj", daily_data["2024-09-27"]["4. close"])
                    thing = daily_data["2024-09-27"]["4. close"]
                    
                    console.log(thing)
                    parseFloat(thing)
                    console.log(parseFloat(thing))

                    daily_data_parse = function(){
                    for (let key in daily_data) {
                        console.log(key)
                        console.log(daily_data[key])
                        console.log(daily_series[key]["4. close"])
                        daily_series.push(Number(daily_series[key]["4. close"]));
                    }

                    };
                    daily_data_parse();
                    
                    var ctx = document.getElementById('candlestick-chart').getContext('2d');
                    ctx.canvas.width = 800;
                    ctx.canvas.height = 400;
                    var chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            datasets: [{
                                label: 'Test',
                                data: daily_prices
                            }]
                        }
                    });
                }
            })
        })

    </script>

    <div>

    </div>
</body>

</html>